<!DOCTYPE HTML>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta name="author" content="amdelamar">
    <meta name="keywords" content="blog,tech,ramblingware,software,cloud,webdev,java,scala,html,css,javascript,code,programming,privacy,open,source">
    <meta name="description" content="This is my blog about computers, programming, tech, and things that bother me. I hope it bothers you too.">
    <meta name="robots" content="all">
    <link rel="canonical" href="https://amdelamar.com/blog/some-advice-on-docker-as-a-beginner/">

    
    <meta property="og:url" content="https://amdelamar.com/blog/some-advice-on-docker-as-a-beginner/">
    <meta property="og:type" content="article">
    <meta property="og:locale" content="en_US">
    <meta property="og:title" content="Some Advice on Docker as a Beginner">
    <meta property="og:image" content="https://cdn.ramblingware.com/file/ramblingware/2017/containers-1024.jpg">
    <meta property="og:description" content="Googling for Docker tutorials yields lots of results. Some new. Some old. Here are six things I&#39;ve gathered so far in 2017.">
    <meta property="article:author" content="amdelamar"/>

    
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:site" content="https://amdelamar.com/blog/some-advice-on-docker-as-a-beginner/">
    <meta name="twitter:creator" content="@">
    <meta name="twitter:title" content="Some Advice on Docker as a Beginner">
    <meta name="twitter:description" content="Googling for Docker tutorials yields lots of results. Some new. Some old. Here are six things I&#39;ve gathered so far in 2017.">
    <meta name="twitter:image" content="https://cdn.ramblingware.com/file/ramblingware/2017/containers-1024.jpg">

    
    <meta itemprop="name" content="Some Advice on Docker as a Beginner">
    <meta itemprop="description" content="Googling for Docker tutorials yields lots of results. Some new. Some old. Here are six things I&#39;ve gathered so far in 2017.">
    <meta itemprop="image" content="https://cdn.ramblingware.com/file/ramblingware/2017/containers-1024.jpg">

    <link rel="stylesheet" type="text/css" href="https://amdelamar.com/blog/css/osseous.min.css">
    <link rel="stylesheet" href="https://amdelamar.com/css/style.min.css">
    <style>
      pre > code { background: none; }
    </style>
    <title>Some Advice on Docker as a Beginner - Austin Delamar</title>
</head>
<body>

<input type="checkbox" id="toggleSidebar" style="display: none;">
<nav id="sidebar" class="border-right shadow-right" aria-label="page navigation">
    <div class="nav-item-close">
      <label class="clickable" for="toggleSidebar">
        <span class="float-right" title="Close Menu" aria-label="Close">
            <svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M2.757 14.657L8 9.414l5.243 5.243 1.414-1.414L9.414 8l5.243-5.243-1.414-1.414L8 6.586 2.757 1.343 1.343 2.757 6.586 8l-5.243 5.243z" fill-rule="evenodd"></path></svg>
        </span>
      </label>
    </div>
    <div class="nav-list text-center">
        <a class="nav-item" href="https://amdelamar.com">
          <img class="round shade margin-right" style="vertical-align: middle" src="https://amdelamar.com/img/amdelamar.jpeg" width="24" height="24" title="A picture of me" />
          Austin Delamar</a>
        <details class="nav-item">
    		  <summary>Blog</summary>
    		  <div class="nav-list padding margin-top border-top border-bottom">
            <a class="nav-item" href="https://amdelamar.com/blog">All Posts</a>
            <a class="nav-item" href="https://amdelamar.com/blog/category/">Categories</a>
            <a class="nav-item" href="https://amdelamar.com/blog/tags/">Tags</a>
    		  </div>
    		</details>
        <a class="nav-item" href="https://amdelamar.com/#about">About</a>
        <a class="nav-item" href="https://amdelamar.com/#contact">Contact</a>
    </div>
    <div class="padding-top-large full-width text-center">
        <p class="text-small"><em>© <a href="https://amdelamar.com">AustinDelamar</a> - 2017-2018</em></p>
    </div>
</nav>

<nav id="navbar" aria-label="page navigation">
    <div id="navbar-body" class="container">
    <div class="nav-item-logo">
      <a href="https://amdelamar.com/blog">
        <img class="round shade margin-right" src="https://amdelamar.com/img/amdelamar.jpeg" height="45" alt="Austin Delamar Logo" />
        <span class="text-medium">Austin Delamar</span>
      </a>
    </div>
    <div class="nav-small-menu">
      <label class="clickable" for="toggleSidebar">
        <span class="nav-item" title="Open Menu">
            <svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M0 7h16v2H0V7zm0-6h16v2H0V1zm0 12h16v2H0v-2z" fill-rule="evenodd"></path></svg>
        </span>
      </label>
    </div>
    <div class="nav-group nav-large-menu text-bold">
    		<div class="nav-item dropdown">
    		  <a href="#docs">Blog &#9662;</a>
    		  <div class="dropdown-body border background-lightgrey text-left">
            <a href="https://amdelamar.com/blog">All Posts</a>
            <a href="https://amdelamar.com/blog/category/">Categories</a>
            <a href="https://amdelamar.com/blog/tags/">Tags</a>
    		  </div>
    		</div>
        <a class="nav-item" href="https://amdelamar.com/#about">About</a>
    </div>
    </div>
</nav>

<article id="post">
  <div class="row section margin-top-large">
    <div class="container">
      <h2>
        Some Advice on Docker as a Beginner
        
      </h2>
      <p class="margin-none text-secondary">
        &nbsp;(&nbsp;<span id="read-time" title="time to read">6 min read</span>&nbsp;)&nbsp;
      </p>
      <p>
        <p>Docker and containers in general are great. Containers are like mini virtual machines that run only the bare essentials of an operating system. And it accomplishes this at a fraction of the resources required than a regular virutal machine. This makes Docker containers ideal for many uses, such as web servers, microservices, and more.</p>

<p>But containers themselves have been around for a long time. It wasn&rsquo;t until Docker came along in 2013 and made a set of easy to use APIs that it really exploded. Now in 2017, there&rsquo;s a lot of tutorials and blog posts about Docker. However, some of the landscape has shfited so not all those old posts are as relevant as they were in 2013.</p>

<p>I&rsquo;ve gathered some good advice I wanted to echo, as well as dispell some common older advice. So here is my incomplete list of Docker tips.</p>

<h2 id="1-add-comments">1. Add Comments</h2>

<p>Quite often this is overlooked or altogether ignored. Don&rsquo;t hesitate to add comments in your Dockerfile and .dockerignore file with <code>#</code> at the beginning of the line. You can save yourself and others time.</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-Dockerfile" data-lang="Dockerfile"><span style="color:#177500"># My App Dockerfile</span><span style="color:#000">
</span><span style="color:#000">
</span><span style="color:#000"></span><span style="color:#177500"># Set Base Image to Alpine Linux 3.6</span><span style="color:#000">
</span><span style="color:#000"></span><span style="color:#a90d91">FROM</span><span style="color:#c41a16"> alpine:3.6</span><span style="color:#000">
</span><span style="color:#000">
</span><span style="color:#000"></span><span style="color:#177500"># Add MyApp user account</span><span style="color:#000">
</span><span style="color:#000"></span><span style="color:#a90d91">RUN</span> groupadd -r myapp <span style="color:#000">&amp;&amp;</span> useradd -d /opt/myapp -g myapp myapp<span style="color:#000">
</span><span style="color:#000">
</span><span style="color:#000"></span><span style="color:#177500"># Download dependencies</span><span style="color:#000">
</span><span style="color:#000"></span><span style="color:#a90d91">RUN</span> apt-get update -y <span style="color:#000">&amp;&amp;</span> apt-get install -y --no-install-recommends <span style="color:#c41a16">\\</span>
    ca-certificates <span style="color:#c41a16">\\</span>
    curl <span style="color:#c41a16">\\</span>
    <span style="color:#000">&amp;&amp;</span> rm -rf /var/lib/apt/lists/*<span style="color:#000">
</span><span style="color:#000">
</span><span style="color:#000"></span><span style="color:#177500"># and more...</span></code></pre></div>
<h2 id="2-keep-it-simple-lean">2. Keep it Simple &amp; Lean</h2>

<p>Containers should be lightweight, ephemeral, and isolated. If your build is taking longer than 2 minutes to finish, or longer than 500ms to startup, then those could be indicators your container image is too heavy. If your image pulls too much external code to use, then its not isolated and consistent. For example, if you&rsquo;re using the package manager to install software that updates frequently.</p>

<h2 id="3-one-focus-per-container">3. One Focus per Container</h2>

<p>Have one &ldquo;focus&rdquo; per container. Not “one process per container” as some might suggest. For example, having a web app with multiple threads is alright. As long as the purpose of the container is the same. But don&rsquo;t combine the database with your application in the same container.</p>

<h2 id="4-asap-images">4. ASAP Images</h2>

<p>Keep images &ldquo;as small as possible&rdquo; ASAP. Make use of .dockerignore and get rid of large files in your image like .git or source code folders. Stick with compiled code and the bare necessities.</p>

<p>Use Alpine Linux as a base image instead of something like Ubuntu. <a href="https://hub.docker.com/_/alpine/" target="_blank">Alpine</a> is only 5MB in size. Alpine is also fast because of its light footprint and low surface area. Which also makes it great for keeping it secure. Alpine based images will download from Docker registry faster, and take up less disk space on your system.</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-Dockerfile" data-lang="Dockerfile"><span style="color:#177500"># My App Dockerfile</span><span style="color:#000">
</span><span style="color:#000">
</span><span style="color:#000"></span><span style="color:#177500"># Set Base Image to Alpine Linux 3.6</span><span style="color:#000">
</span><span style="color:#000"></span><span style="color:#a90d91">FROM</span><span style="color:#c41a16"> alpine:3.6</span></code></pre></div>
<h2 id="5-tagging">5. Tagging</h2>

<p>Use tags for separating image versions. If you&rsquo;re familiar with Git and branches, tagging docker images is like creating git branches. If you never used tags then the <code>latest</code> tag is automaticly used if no tag is given during the build process. Avoid being too generic like <code>dev, test, alpha, beta</code>. Instead put versions in tags as needed like <code>2.0.0, 2.0.0-alpine, patch-2.0.1, test-2.5.4, dev-3.0</code>, etc. And don&rsquo;t forget to update your README with the available list of tags.</p>

<p><img src="https://cdn.ramblingware.com/file/ramblingware/2017/docker/dockertags.png" alt="Docker" /></p>

<p>This also applies to your base image. For example, <a href="https://hub.docker.com/_/tomcat/" target="_blank">Apache Tomcat</a> has multiple versions still in use. Version 7 through 9. You can specify <code>FROM tomcat:8</code> for version 8.0 but maybe you wanted version 8.5 on Alpine instead. In that case, use <code>FROM tomcat:8.5-jre8-alpine</code> instead. You&rsquo;ll avoid inconsistencies when the latest images get updated and accidentally break something. So don&rsquo;t just use <code>FROM ubuntu</code>, use <code>FROM ubuntu:16.04</code> for consistency.</p>

<h2 id="6-update-only-if-necessary">6. Update Only If Necessary</h2>

<p>Try not to <code>RUN apt-get update</code> for the sake of getting updates. Most likely your base image has already updated the necessary packages it needed. If you update on top of this base image, it can make your child images inconsistent. If an update is absolutely needed, then maybe. But contact the upstream folks who control the base image you&rsquo;re using and inform them about it.</p>

<p>That&rsquo;s all for now! Read the <a href="https://docs.docker.com/" target="_blank">offical docs</a> and checkout <a href="https://docker-curriculum.com" target="_blank">this tutorial</a> if you&rsquo;re not familiar with Docker commands and the Dockerfile yet. There is also this <a href="https://github.com/veggiemonk/awesome-docker" target="_blank">curated list</a> of awesome docker help. Let me know if there is some great advice I&rsquo;m missing or if I&rsquo;m completely off-base on something. Thanks!</p>

      </p>
      <br/>
      <p id="post-metadata" class="text-secondary">
        <br/>
        <span id="date" title="21 Sep 17 17:00 PDT">Published: Sep 22, 2017</span><br/>
        <span id="category">Category: <a href="https://amdelamar.com/blog/category/code" class="text-secondary">code</a></span><br/>
        <span id="tags">Tags:
        <a href="https://amdelamar.com/blog/tags/docker" class="text-secondary">docker</a>, <a href="https://amdelamar.com/blog/tags/devops" class="text-secondary">devops</a></span>
      </p>
    </div>
  </div>
</article>
<footer class="row section text-center">
  <p><small><em>&#169; <a href="https://amdelamar.com">AustinDelamar</a> - 2014-2019</em></small></p>
  <a class="button button-primary float-right margin-right-large" title="Back to top" href="#">Back to Top</a>
</footer>
</body>
</html>

